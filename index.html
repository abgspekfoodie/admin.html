<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snapbite™ Admin Panel</title>
  <style>
    body { background:#121212; color:#fff; font-family:'Poppins', sans-serif; margin:0; padding:2rem; }
    h1 { color:#ff9500; text-align:center; margin-bottom:2rem; }
    .category { margin-bottom:2rem; }
    .category h2 { border-bottom:1px solid #444; padding-bottom:0.5rem; color:#f0f0f0; }
    .item { display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid #333; }
    .item label { font-weight:500; }
    .toggle { transform:scale(1.2); }
    .summary { background:#1f1f1f; padding:1rem; border-radius:10px; }
    .summary h3 { margin-top:0; color:#ff9500; }
  </style>
</head>
<body>
  <h1>Snapbite™ Admin Control Panel</h1>
  <div id="panel"></div>
  <div class="summary">
    <h3>Sales Summary</h3>
    <ul id="salesSummary"></ul>
  </div>  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getDatabase, ref, onValue, set, update } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB_gnrfNMlJaNu6zSZqX7eiXzbZrnmtA2M",
      authDomain: "snapbite-admin.firebaseapp.com",
      databaseURL: "https://snapbite-admin-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "snapbite-admin",
      storageBucket: "snapbite-admin.appspot.com",
      messagingSenderId: "146625734660",
      appId: "1:146625734660:web:23ada593e4818ed7332d51"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const categories = {
      "Beef Series": ["Primebite", "Beef N' Cheese", "The Fun Guy", "The Fixer"],
      "Chicken Series": ["Chickbite", "Goldcut", "The Cap Cut", "Stripstack"],
      "Tex-Mex Series": ["Smoke Beef Taco", "Smokey Chop Taco", "Mix Taco", "Smoke Beef Quesadilla", "Smoke Chicken Quesadilla", "Mix Quesadilla"],
      "Sausage Series": ["Classic Sausage", "Chickola"],
      "Snacks": ["Popcorn Chicken", "Cheesy Fries", "Hot Bites"]
    };

    function renderPanel(data, sales) {
      const panel = document.getElementById("panel");
      panel.innerHTML = "";

      for (const [category, items] of Object.entries(categories)) {
        const catDiv = document.createElement("div");
        catDiv.className = "category";
        const title = document.createElement("h2");
        title.textContent = category;
        catDiv.appendChild(title);

        items.forEach(item => {
          const itemDiv = document.createElement("div");
          itemDiv.className = "item";
          const label = document.createElement("label");
          label.textContent = item;

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.className = "toggle";
          checkbox.checked = data[item]?.available ?? true;

          checkbox.addEventListener("change", () => {
            set(ref(db, 'menu/' + item), { available: checkbox.checked });
          });

          itemDiv.appendChild(label);
          itemDiv.appendChild(checkbox);
          catDiv.appendChild(itemDiv);
        });

        panel.appendChild(catDiv);
      }

      const summary = document.getElementById("salesSummary");
      summary.innerHTML = "";
      for (const [category, items] of Object.entries(categories)) {
        let total = 0;
        items.forEach(item => total += sales[item] ?? 0);
        const li = document.createElement("li");
        li.textContent = `${category}: ${total} sold`;
        summary.appendChild(li);
      }
    }

    function fetchData() {
      onValue(ref(db, 'menu'), snapshot => {
        const menuData = snapshot.val() || {};
        onValue(ref(db, 'sales'), snap => {
          const salesData = snap.val() || {};
          renderPanel(menuData, salesData);
        });
      });
    }

    fetchData();
  </script></body>
</html>
