<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Snapbite™ Admin Panel</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <style>
    body { font-family: 'Arial', sans-serif; background: #0e0e0e; color: #fff; padding: 2rem; }
    h1 { color: #ff9500; margin-bottom: 1rem; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #333; padding: 0.5rem; text-align: left; }
    th { background: #222; color: #ff9500; }
    .toggle-btn { cursor: pointer; background: #ff9500; color: #000; border: none; padding: 6px 12px; border-radius: 4px; }
    .section { margin-bottom: 2rem; }
    .summary-box { background: #191919; padding: 1rem; border-radius: 8px; margin-top: 1rem; }
    .summary-box h3 { margin-top: 0; color: #ff9500; }
  </style>
</head>
<body>
  <h1>Snapbite™ Admin Panel</h1>  <div class="section">
    <h2>Menu Availability</h2>
    <table id="menuTable">
      <thead><tr><th>Name</th><th>Category</th><th>Price (RM)</th><th>Available</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>  <div class="section">
    <h2>Side Items</h2>
    <table id="sidesTable">
      <thead><tr><th>Name</th><th>Price (RM)</th><th>Available</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>  <div class="section">
    <h2>Sales Summary</h2>
    <div class="summary-box">
      <p><strong>Gross Sales:</strong> RM <span id="gross">0.00</span></p>
      <p><strong>Net Sales:</strong> RM <span id="net">0.00</span></p>
      <p><strong>Gross Profit:</strong> RM <span id="gp">0.00</span></p>
      <p><strong>Net Profit:</strong> RM <span id="np">0.00</span></p>
    </div>
  </div>  <div class="section">
    <label><input type="checkbox" id="offdayCheckbox"> Mark Today as Off Day</label>
  </div><script>
const firebaseConfig = {
  apiKey: "AIzaSyB_gnrfNMlJaNu6zSZqX7eiXzbZrnmtA2M",
  authDomain: "snapbite-admin.firebaseapp.com",
  databaseURL: "https://snapbite-admin-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "snapbite-admin",
  storageBucket: "snapbite-admin.appspot.com",
  messagingSenderId: "146625734660",
  appId: "1:146625734660:web:23ada593e4818ed7332d51"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function renderTable(refPath, tableBodyId, isMenu = true) {
  db.ref(refPath).on("value", snap => {
    const data = snap.val();
    const tbody = document.getElementById(tableBodyId);
    tbody.innerHTML = "";
    Object.entries(data || {}).forEach(([key, item]) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${item.name}</td>
        ${isMenu ? `<td>${item.category || ''}</td>` : ''}
        <td>${item.price.toFixed(2)}</td>
        <td><input type="checkbox" ${item.available ? 'checked' : ''} onchange="toggleAvailable('${refPath}', '${key}', this.checked)"></td>
      `;
      tbody.appendChild(tr);
    });
  });
}

function toggleAvailable(path, key, status) {
  db.ref(`${path}/${key}/available`).set(status);
}

function loadSales() {
  db.ref("sales").once("value", snap => {
    const sales = snap.val();
    document.getElementById("gross").innerText = (sales?.grossTotal || 0).toFixed(2);
    document.getElementById("net").innerText = (sales?.netTotal || 0).toFixed(2);
    document.getElementById("gp").innerText = (sales?.grossProfit || 0).toFixed(2);
    document.getElementById("np").innerText = (sales?.netProfit || 0).toFixed(2);
  });
}

function setupOffdayToggle() {
  const checkbox = document.getElementById("offdayCheckbox");
  db.ref("settings/offday").on("value", snap => {
    checkbox.checked = snap.val() === true;
  });
  checkbox.addEventListener("change", () => {
    db.ref("settings/offday").set(checkbox.checked);
  });
}

// Init
renderTable("menus", "menuTable".replace('#', ''), true);
renderTable("sides", "sidesTable".replace('#', ''), false);
loadSales();
setupOffdayToggle();
</script></body>
</html>
